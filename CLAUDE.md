# CLAUDE.md โ HOLOP Mini App (Telegram)

> **CRITICAL**: ะญัะพั ัะฐะนะป โ ะณะปะฐะฒะฝัะน ะธััะพัะฝะธะบ ะบะพะฝัะตะบััะฐ. ะัะธ compacting conversation โ ะะะะะงะะขะะ ััะพั ัะฐะนะป ะฟะตัะฒัะผ ะดะตะปะพะผ.

## ะัะพะตะบั

**HOLOP Mini App** โ Telegram Mini App (TMA) ะดะปั idle-ัะบะพะฝะพะผะธัะตัะบะพะณะพ ัะธะผัะปััะพัะฐ ยซHOLOPยป.
ะัะตะฒะฝะตััััะบะธะน ัะตััะธะฝะณ: ะพั ะกะผะตัะดะฐ ะดะพ ะฆะฐัั. PvP ะฝะฐะฑะตะณะธ, ะฟะตัะตัั, ัะพะปะพะฟั, ะบะฝัะถะตััะฒะฐ.

- **ะกัะตะบ**: Vite + React + TypeScript + PixiJS + Telegram WebApp API
- **ะัะบะตะฝะด-ะฑะพั**: Python (python-telegram-bot), PostgreSQL โ ะฒ ะะขะะะะฌะะะ ัะตะฟะพ `VSemenchuk/holop`
- **ะกะฐะนั-ะฟะพัััะพะปะธะพ**: `/Users/alekseigakh/Desktop/holop_mascot/site/` (eremka.vercel.app)
- **ะะพั-ัะตะฟะพ (ะบะปะพะฝะธัะพะฒะฐะฝะฝัะน)**: `/Users/alekseigakh/Desktop/holop-bot/` โ ะขะะะฌะะ ะะะฏ ะงะขะะะะฏ, ะฝะต ะฟััะธัั ััะดะฐ
- **Mini App ะฟัะพะตะบั**: `/Users/alekseigakh/Desktop/Projects/holop-mini-app/`

## ะะปััะตะฒัะต ัะฐะนะปั ะดะปั ะธะทััะตะฝะธั

| ะคะฐะนะป | ะะดะต | ะะฐัะตะผ |
|------|-----|-------|
| `PRODUCT_BIBLE.md` | ะญัะพั ะฟัะพะตะบั | ะัั ะธะณัะพะฒะฐั ะปะพะณะธะบะฐ, ัะบัะฐะฝั, ัะบะพะฝะพะผะธะบะฐ, ัะพัะผัะปั |
| `game_config.py` | holop-bot | ะะฐััะตั-ะบะพะฝัะธะณ: ะฒัะต ะทะดะฐะฝะธั, ัะธััะปั, ัะพัะผัะปั, ะฑะฐะปะฐะฝั |
| `database_pg.py` | holop-bot | ะะพะดะตะปะธ ะดะฐะฝะฝัั, SQL-ะทะฐะฟัะพัั |
| `handlers/*.py` | holop-bot | ะะพะณะธะบะฐ ะบะฐะถะดะพะน ะผะตัะฐะฝะธะบะธ |
| `locales/ru.json` | holop-bot | ะัะต UI-ัััะพะบะธ ะฝะฐ ััััะบะพะผ |
| `shared.css` | site/public/css/ | ะคะธัะผะตะฝะฝัะน ััะธะปั (ัะฒะตัะฐ, ััะธััั, ะบะพะผะฟะพะฝะตะฝัั) |
| `blob_urls_game_webp.json` | site/public/ | CDN URLs ะฒัะตั 157 ะธะณัะพะฒัั ะฐััะตัะพะฒ |

## ะะธะทะฐะนะฝ-ัะธััะตะผะฐ

### ะฆะฒะตัะฐ (HOLOP Brand)
```
--gold: #C8973E          (ะฐะบัะตะฝัั, ะทะฐะณะพะปะพะฒะบะธ, ะบะฝะพะฟะบะธ)
--gold-light: #E8C77B    (ัะพะฒะตัั, ะธะบะพะฝะบะธ)
--gold-dark: #8B6914     (ัะตะฝะธ, ะฑะพัะดะตัั)
--parchment: #F5ECD7     (ะพัะฝะพะฒะฝะพะน ัะตะบัั)
--parchment-dark: #E8D9B8 (ะฒัะพัะธัะฝัะน ัะตะบัั)
--ink: #2C1810           (ััะผะฝัะน ัะตะบัั ะฝะฐ ัะฒะตัะปะพะผ ัะพะฝะต)
--bg-dark: #1A1008       (ะพัะฝะพะฒะฝะพะน ัะพะฝ)
--bg-card: #231A0E       (ัะพะฝ ะบะฐััะพัะตะบ)
--border: rgba(200,151,62,.15)
--glow: rgba(200,151,62,.06)
```

### ะจัะธััั
- **Neucha** โ ะบัััะธะฒะฝัะน, ะดะปั ะทะฐะณะพะปะพะฒะบะพะฒ (ะธะณัะพะฒะพะน ััะธะปั)
- **Cormorant Garamond** โ ัะตัะธัะฝัะน, ะดะปั ะฟะพะดะทะฐะณะพะปะพะฒะบะพะฒ (ัะปะตะณะฐะฝัะฝะพััั)
- **Inter** โ ะฑะตะท ะทะฐัะตัะตะบ, ะดะปั body ัะตะบััะฐ (ัะธัะฐะตะผะพััั)

### Apple HIG 26 ะฟัะธะฝัะธะฟั
- ะะธะฝะธะผะฐะปัะฝัะน touch target: 44ร44pt
- SF Pro ะดะปั ัะธััะตะผะฝัั ัะปะตะผะตะฝัะพะฒ (Dynamic Type)
- Liquid Glass: ะฟะพะปัะฟัะพะทัะฐัะฝะพััั, ะณะปัะฑะธะฝะฐ, ัะฐะทะผััะธะต ะฝะฐ ัะพะฝะต โ ะฝะพ ะฒ ะทะพะปะพัะพะน ะฟะฐะปะธััะต HOLOP
- ะขัะผะฝะฐั ัะตะผะฐ ะฟะพ ัะผะพะปัะฐะฝะธั (ัะธัะผะตะฝะฝัะน #1A1008)
- ะะต ะฟัะตะดะปะฐะณะฐัั ะพัะดะตะปัะฝัะน ะฟะตัะตะบะปััะฐัะตะปั ัะตะผั โ ัะปะตะดะพะฒะฐัั ัะธััะตะผะฝัะผ ะฝะฐัััะพะนะบะฐะผ
- ะะพะฝััะฐัั ะผะธะฝะธะผัะผ 4.5:1, ัััะตะผะธัััั ะบ 7:1

## CDN ะฐััะตัะพะฒ

**Base URL**: `https://hvtv6f4jyz7itmqv.public.blob.vercel-storage.com/holop/`

ะะฐัะตะณะพัะธะธ: buildings, weapons, armor, defense, monsters, titles, palace, territories, currencies, ui_main, ui_territory, ui_ratings, ui_shop, ui_bank, ui_caves, ui_misc, shop_boosters, shop_buildings, shop_icons, explosives, potions, cave_boosters, holop_professions, holop_protection

ะัะต URL ะฒ ัะฐะนะปะต `blob_urls_game_webp.json`.

## Telegram WebApp API

```typescript
// ะะฝะธัะธะฐะปะธะทะฐัะธั
const tg = window.Telegram?.WebApp;
tg?.ready();
tg?.expand();  // ะะฐะทะฒะตัะฝััั ะฝะฐ ะฒะตัั ัะบัะฐะฝ

// ะขะตะผะฐ
tg?.themeParams  // bg_color, text_color, hint_color, button_color, etc.

// Haptics
tg?.HapticFeedback.impactOccurred('medium');
tg?.HapticFeedback.notificationOccurred('success');

// ะะฝะพะฟะบะฐ ะฝะฐะทะฐะด
tg?.BackButton.show();
tg?.BackButton.onClick(() => navigate(-1));

// ะะปะฐะฒะฝะฐั ะบะฝะพะฟะบะฐ
tg?.MainButton.setText('ะกะพะฑัะฐัั ะดะพัะพะด');
tg?.MainButton.show();
tg?.MainButton.onClick(() => collectIncome());

// ะะฐะฝะฝัะต ะฟะพะปัะทะพะฒะฐัะตะปั
tg?.initDataUnsafe?.user  // { id, first_name, last_name, username, language_code }
```

## ะัะฐะฒะธะปะฐ ัะฐะทัะฐะฑะพัะบะธ

1. **ะะ ะะฃะจะะขะฌ ะฒ VSemenchuk/holop** โ ััะพ ะพัะดะตะปัะฝัะน ัะตะฟะพ ะฑะพัะฐ
2. **ะะพะบ-ะดะฐะฝะฝัะต** โ ะฒัั ัะฐะฑะพัะฐะตั ะฑะตะท ะฑัะบะตะฝะดะฐ, ะดะฐะฝะฝัะต ะทะฐัะฐัะดะบะพะถะตะฝั ะฝะพ ัะตะฐะปะธััะธัะฝั
3. **ะัะต ะฐััะตัั ั CDN** โ ะฝะต ััะฐะฝะธัั ะบะฐััะธะฝะบะธ ะปะพะบะฐะปัะฝะพ
4. **Mobile-first** โ 375px ะผะธะฝะธะผะฐะปัะฝะฐั ัะธัะธะฝะฐ, ะผะฐะบัะธะผัะผ 428px
5. **PixiJS ัะพะปัะบะพ ะดะปั ะฐะฝะธะผะฐัะธะน** โ Canvas ะดะปั ัััะตะบัะพะฒ, DOM ะดะปั UI
6. **TypeScript strict** โ ะฝะธะบะฐะบะธั `any`, ะฒัั ัะธะฟะธะทะธัะพะฒะฐะฝะพ
7. **ะะธะปะธะฝะณะฒะฐะปัะฝะพััั** โ RU ะฟะพ ัะผะพะปัะฐะฝะธั, EN ะบะฐะบ ะฒัะพัะพะน ัะทัะบ
8. **Vercel deploy** โ `vercel --prod` ะธะท ะบะพัะฝั ะฟัะพะตะบัะฐ

## ะญะบัะฐะฝั ะฟัะธะปะพะถะตะฝะธั (ะฝะฐะฒะธะณะฐัะธั)

```
Tab Bar (5 ะฒะบะปะฐะดะพะบ):
โโโ ๐ฐ ะขะตััะธัะพัะธั (ะณะปะฐะฒะฝัะน ัะบัะฐะฝ)
โ   โโโ ะะฐััะฐ ะทะดะฐะฝะธะน (PixiJS ะฐะฝะธะผะฐัะธะธ)
โ   โโโ ะกััะพะธัะตะปัััะฒะพ/ัะปัััะตะฝะธะต
โ   โโโ ะกะฑะพั ะดะพัะพะดะฐ
โโโ โ๏ธ ะะฐะฑะตะณะธ
โ   โโโ ะกะฟะธัะพะบ ัะตะปะตะน
โ   โโโ ะญะบัะฐะฝ ะฑะพั
โ   โโโ ะััะพัะธั
โโโ ๐ณ๏ธ ะะตัะตัั
โ   โโโ ะัะฑะพั ะฟะตัะตัั
โ   โโโ ะญะบัะฐะฝ ะฑะพั ั ะผะพะฝัััะพะผ
โ   โโโ ะัั / ะฝะฐะณัะฐะดั
โโโ ๐๏ธ ะะฐะณะฐะทะธะฝ
โ   โโโ ะััะถะธะต
โ   โโโ ะัะพะฝั
โ   โโโ ะัััะตัั
โ   โโโ ะะพัะผะตัะธะบะฐ
โโโ ๐ค ะัะพัะธะปั
    โโโ ะขะธััะป / ะฟัะพะณัะตัั
    โโโ ะฅะพะปะพะฟั
    โโโ ะะฝัะถะตััะฒะพ
    โโโ ะะฐะฝะบ (ะบะฐะทะฝะฐ)
    โโโ ะะพััะธะถะตะฝะธั
    โโโ ะะฐัััะพะนะบะธ
```

## ะัะธ ะฟะพัะตัะต ะบะพะฝัะตะบััะฐ (compacting)

1. ะะตัะตัะธัะฐะน ััะพั CLAUDE.md
2. ะะตัะตัะธัะฐะน PRODUCT_BIBLE.md
3. ะะพัะผะพััะธ ัะตะบััะตะต ัะพััะพัะฝะธะต ะบะพะดะฐ: `ls src/`
4. ะัะพะฒะตัั git log: `git log --oneline -10`
5. ะัะพะดะพะปะถะฐะน ัะฐะฑะพัั
